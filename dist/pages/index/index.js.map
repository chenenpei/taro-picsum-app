{"version":3,"file":"pages/index/index.js","sources":["webpack:///./src/pages/index/index.vue?1497","webpack:///._src_pages_index_index.vue","webpack:///./src/pages/index/index.vue?9d18","webpack:///./src/pages/index/index.vue?e724","webpack:///./src/pages/index/index.vue?5b58","webpack:///./src/pages/index/index.vue?9049","webpack:///./src/pages/index/index.vue?550b"],"sourcesContent":["import { render } from \"./index.vue?vue&type=template&id=1badc801\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=1badc801&lang=scss\"\nscript.render = render\n/* hot reload */\nif (module.hot) {\n  script.__hmrId = \"1badc801\"\n  const api = __VUE_HMR_RUNTIME__\n  module.hot.accept()\n  if (!api.createRecord('1badc801', script)) {\n    api.reload('1badc801', script)\n  }\n  \n  module.hot.accept(\"./index.vue?vue&type=template&id=1badc801\", () => {\n    api.rerender('1badc801', render)\n  })\n\n}\n\nscript.__file = \"src/pages/index/index.vue\"\n\nexport default script","<template>\n    <view class=\"index\">\n        <nut-cell>\n            <view-block class=\"infiniteUl\" id=\"scrollDemo\">\n                <nut-infiniteloading\n                    pull-icon=\"loading\"\n                    load-txt=\"Loading...\"\n                    load-more-txt=\"No More\"\n                    container-id=\"scrollDemo\"\n                    :has-more=\"hasMore\"\n                    @load-more=\"loadMore\"\n                >\n                    <nut-cell\n                        class=\"infiniteLi\"\n                        v-for=\"(item, index) in pictures\"\n                        :key=\"index\"\n                        @tap=\"jumpToDetail(item)\"\n                    >\n                        <view class=\"content\">\n                            <image\n                                :src=\"`https://picsum.photos/id/${item.id}/300/300`\"\n                            />\n                            <view>{{ item.author }}</view>\n                        </view>\n                    </nut-cell>\n                </nut-infiniteloading>\n            </view-block>\n        </nut-cell>\n    </view>\n</template>\n\n<script>\nimport { ref, onMounted, computed } from \"vue\";\nimport { useStore } from \"vuex\";\nimport Taro from \"@tarojs/taro\";\n\nexport default {\n    name: \"Index\",\n    components: {},\n    setup() {\n        const store = useStore();\n\n        const loading = ref(false);\n        const page = ref(0);\n\n        const hasMore = computed(() => page.value < 10);\n        const pictures = computed(() => store.state.pictures);\n\n        const jumpToDetail = (info) => {\n            const { id, author, url } = info;\n            Taro.navigateTo({\n                url: `/pages/detail/index?id=${id}&author=${author}&url=${url}`,\n            });\n        };\n\n        const loadPicutres = async (page, limit = 10) => {\n            return store.dispatch(\"LOAD_PICTURES_ACTION\", { page, limit });\n        };\n        const loadMore = async () => {\n            loading.value = true;\n            page.value++;\n            try {\n                await loadPicutres(page.value, undefined);\n            } catch (error) {\n                console.log(error.message);\n            } finally {\n                loading.value = false;\n            }\n        };\n\n        onMounted(() => {\n            loadMore();\n        });\n\n        return {\n            loading,\n            hasMore,\n            pictures,\n            loadMore,\n            jumpToDetail,\n        };\n    },\n};\n</script>\n\n<style lang=\"scss\">\n.index {\n    font-family: \"Avenir\", Helvetica, Arial, sans-serif;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    text-align: center;\n\n    .infiniteUl {\n        padding: 0 8px;\n        height: 100vh;\n        width: 100%;\n        overflow-y: auto;\n        overflow-x: hidden;\n    }\n\n    .infiniteLi {\n        margin-top: 10px;\n        font-size: 14px;\n        width: 100%;\n        color: rgba(100, 100, 100, 1);\n        text-align: center;\n    }\n\n    .loading {\n        display: block;\n        width: 100%;\n        text-align: center;\n    }\n}\n</style>\n","// extracted by mini-css-extract-plugin","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"../../../node_modules/@tarojs/taro-loader/lib/raw.js!./index.vue\"\nvar config = {\"navigationBarTitleText\":\"首页\"};\n\n\nvar inst = Page(createPageConfig(component, 'pages/index/index', {root:{cn:[]}}, config || {}))\n\n","export { default } from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/dist/index.js??ref--10-0!./index.vue?vue&type=script&lang=js\"; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/dist/index.js??ref--10-0!./index.vue?vue&type=script&lang=js\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/@tarojs/mini-runner/node_modules/css-loader/dist/cjs.js??ref--1-oneOf-0-1!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js??ref--1-oneOf-0-2!../../../node_modules/resolve-url-loader/index.js!../../../node_modules/sass-loader/dist/cjs.js??ref--1-oneOf-0-4!../../../node_modules/vue-loader/dist/index.js??ref--10-0!./index.vue?vue&type=style&index=0&id=1badc801&lang=scss\"","export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/dist/templateLoader.js??ref--6!../../../node_modules/vue-loader/dist/index.js??ref--10-0!./index.vue?vue&type=template&id=1badc801\""],"mappings":";;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAYA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;ACSA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AADA;AAGA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAFA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAMA;AACA;AAPA;AAAA;AAQA;AARA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAWA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AALA;AAOA;AA7CA;;;;;;;;;;;;;;;;;;AAnCA;;;AAiBA;;;;;;;;;AAjBA;AAEA;AAAA;AAAA;AAAA;AAuBA;AAtBA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAeA;AAXA;AAAA;AAFA;AACA;AAEA;AACA;AAAA;AAAA;AAQA;AANA;AAAA;AAEA;AACA;;AAFA;AAGA;AAAA;AAJA;;;;AANA;;AAAA;AAYA;;AAZA;AAEA;;;;AAVA;;AAAA;AAAA;;;;AADA;AAAA;;;;AAwBA;;;;;;;;;;;;AC3BA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACNA;AAAA;AAAA;AAAA;;;;;;;;;;;;ACAA;AAAA;AAAA;;;;;;;;;;;;;;ACAA;AAAA;AAAA;;;;;A","sourceRoot":""}